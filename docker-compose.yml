version: '3.8'

services:
  wireguard-exporter:
    build: .
    container_name: wireguard_exporter
    image: wireguard_exporter:latest
    restart: unless-stopped
    network_mode: host
    cap_add:
      - NET_ADMIN
    command:
      - "-listen-address"
      - ":9586"
      - "-metrics-path"
      - "/metrics"
      - "-interval"
      - "15s"
      # Uncomment and modify to add peer aliases:
      # - "-alias"
      # - "publicKey1:alias1,publicKey2:alias2"
      # Uncomment for verbose logging:
      # - "-verbose"
    labels:
      - "prometheus.io/scrape=true"
      - "prometheus.io/port=9586"
      - "prometheus.io/path=/metrics"
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

